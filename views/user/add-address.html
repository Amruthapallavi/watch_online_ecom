<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/public/css/add-Address.css">
</head>
<body >
    <div class="container">
        <div class="header">
            <h2>Create Account</h2>
        </div>
        <form id="form" class="form">
            <div class="form-control">
                <label for="name">Full Name</label>
                <input type="text" placeholder="Full Name" id="name" required />
               
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="username">House_No/Name</label>
                <input type="text" id="house_no" placeholder="Type here" id="email" />
                
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="Street">Street</label>
                <input type="text" id="street" placeholder="Type here" id="email" />
                
                <small>Error message</small>
            </div><div class="form-control">
                <label for="locality">Locality</label>
                <input type="text" id="locality"  placeholder="Type here" id="email" />
                
                <small>Error message</small>
            </div><div class="form-control">
                <label for="username">City</label>
                <input type="text" id="city" placeholder="example@gmail.com" id="email" />
                
                <small>Error message</small>
            </div><div class="form-control">
                <label for="username">District</label>
                <input type="email" placeholder="example@gmail.com" id="email" />
                
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="username">Pincode</label>
                <input type="password" placeholder="Password" id="password"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="state">State</label>
                <input type="password" placeholder="Password two" id="password2"/>
                
                <small>Error message</small>
            </div>
            <button>Submit</button>
        </form>
    </div>
    
    
    <!-- SOCIAL PANEL HTML
    <div class="social-panel-container">
        <div class="social-panel">
            <p>Created with <i class="fa fa-heart"></i> by
                <a target="_blank" href="https://florin-pop.com">Florin Pop</a></p>
            <button class="close-btn"><i class="fas fa-times"></i></button>
            <h4>Get in touch on</h4>
            <ul>
                <li>
                    <a href="https://www.patreon.com/florinpop17" target="_blank">
                        <i class="fab fa-discord"></i>
                    </a>
                </li>
                <li>
                    <a href="https://twitter.com/florinpop1705" target="_blank">
                        <i class="fab fa-twitter"></i>
                    </a>
                </li>
                <li>
                    <a href="https://linkedin.com/in/florinpop17" target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a href="https://facebook.com/florinpop17" target="_blank">
                        <i class="fab fa-facebook"></i>
                    </a>
                </li>
                <li>
                    <a href="https://instagram.com/florinpop17" target="_blank">
                        <i class="fab fa-instagram"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div> -->
    <!-- <button class="floating-btn">
        Get in Touch
    </button>
    
    <div class="floating-text">
        Part of <a href="https://florin-pop.com/blog/2019/09/100-days-100-projects" target="_blank">#100Days100Projects</a>
    </div> -->
    <!-- <script>
const form = document.getElementById('form');
const name = document.getElementById('fullname');
const phone = document.getElementById('phone');
const state = document.getElementById('state');
const city = document.getElementById('city');
const street = document.getElementById('street');
const house_no = document.getElementById('house_no');
const locality = document.getElementById('locality');
const district = document.getElementById('district');

const pincode = document.getElementById('pincode');


form.addEventListener('submit', e => {
	e.preventDefault();
	
	checkInputs();
}); -->

<!-- // function checkInputs() {
// 	// trim to remove the whitespaces
// 	const nameValue = username.value.trim();
// 	const stateValue = state.value.trim();
//     const localityValue = locality.value.trim();
// 	// const streetValue = state.value.trim();
// 	const pincodeValue = pincode.value.trim();
//     const cityValue = city.value.trim();
// 	const districtValue = district.value.trim();
// 	const phoneValue = phone.value.trim();
	
// 	if(usernameValue === '') {
// 		setErrorFor(name, 'Name cannot be blank');
// 	} else {
// 		setSuccessFor(name);
// 	} -->
<!-- 	
// 	if(pincodeValue === '') {
// 		setErrorFor(pincode, 'pincode cannot be blank');
// 	} else
//     //  if (!isEmail(emailValue)) {
// 	// 	setErrorFor(email, 'Not a valid email');
// 	// } else 
//     {
// 		setSuccessFor(pincode);
// 	}
	
// 	if(cityValue === '') {
// 		setErrorFor(city, 'This field cannot be blank');
// 	} else {
// 		setSuccessFor(city);
// 	}
	
// 	if(districtValue === '') {
// 		setErrorFor(district, 'District cannot be blank');
// 	} else 
//     // if(passwordValue !== password2Value) {
// 	// 	setErrorFor(password2, 'Passwords does not match');
// 	// } else
//     {
// 		setSuccessFor(district);
// 	}
// }

// function setErrorFor(input, message) {
// 	const formControl = input.parentElement;
// 	const small = formControl.querySelector('small');
// 	formControl.className = 'form-control error';
// 	small.innerText = message;
// }

// function setSuccessFor(input) {
// 	const formControl = input.parentElement;
// 	formControl.className = 'form-control success';
// }
	
// function isEmail(email) {
// 	return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
// } -->












<!-- 
// SOCIAL PANEL JS
const floating_btn = document.querySelector('.floating-btn');
const close_btn = document.querySelector('.close-btn');
const social_panel_container = document.querySelector('.social-panel-container');

floating_btn.addEventListener('click', () => {
	social_panel_container.classList.toggle('visible')
});

close_btn.addEventListener('click', () => {
	social_panel_container.classList.remove('visible')
}); -->
    <!-- </script> -->
</body>
</html>













<%- include('../include/adminHeader.ejs') %>

<link rel="stylesheet" href="/css/adminDashboard.css">
<title>Admin Dashboard</title>
<style>
  body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
    }

    main {
        padding: 20px;
        max-width: 1200px;
        margin: auto;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .summary {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }

    .card {
        background: #f9f9f9;
        padding: 20px;
        border-radius: 8px;
        flex: 1;
        margin: 0 10px;
        text-align: center;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .sales-chart {
        margin-bottom: 20px;
    }

    .top-products {
        background: #f9f9f9;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    footer {
        text-align: center;
        padding: 10px 0;
        background: #f9f9f9;
        margin-top: 20px;
    }

    select, button {
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
        border: 1px solid #ccc;
    }

    .report-controls {
        display: flex;
        align-items: center;
    }

    .generate-report-button {
        margin-left: 10px;
    }
</style>
</head>
<body>

<main style="color: black;">
    <h1>Dashboard</h1>
    <div>
        <h2>Sales Report</h2>
        <div class="report-controls">
            <label for="reportType">Report Type:</label>
            <select id="reportType">
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="monthly">Monthly</option>
                <option value="yearly">Yearly</option>
                <option value="custom">Custom Range</option>
            </select>
            
            <div id="customRange" style="display: none;">
                <label for="startDate">Start Date:</label>
                <input type="date" id="startDate">
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate">
            </div>
        
            <button onclick="generateReport()">Generate Report</button>
        </div>
        
    </div>
    <div class="summary">
        <div class="card">
            <h2>Total Sales</h2>
            <p id="totalSales">₹0</p> <!-- Will be updated by JavaScript -->
            <p>+20% month over month</p>
        </div>
        <div class="card">
            <h2>Orders</h2>
            <p id="totalOrders">0</p> <!-- JavaScript will update this -->
            <p>+33% last month</p>
        </div>
        <div class="card">
            <h2>Discount</h2>
            <p id="totalDiscount">₹0</p> <!-- JavaScript will update this -->
            <p>-8% month over month</p>
        </div>
        <div class="card">
            <h2>Active Users</h2>
            <p id="newUsers">0</p> <!-- JavaScript will update this -->
            <p>-8% month over month</p>
        </div>
    </div>
    

    <div class="sales-chart">
        <h2>Total Sales</h2>
        <canvas id="salesChart"></canvas>
    </div>

    <div class="top-products">
        <h2>Top Selling Products</h2>
        <ul>
            <li>Omega Speedmaster - In stock - ₹6,799</li>
            <li>Fossil Diamonds - In stock - ₹1,999</li>
            <li>Armani Exchange - In stock - ₹10,999</li>
            <li>Fossil Dark - In stock - ₹1,999</li>
        </ul>
    </div>
</main>

<footer>
    <p>Tick-Tock</p>
    <p>About Us | Category | Blog</p>
    <div>
        <p>Information | Help Center | My Orders</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script>
    const ctx = document.getElementById('salesChart').getContext('2d');
    let salesChart; // Declare salesChart variable globally

    // Function to generate report and fetch data from the backend
    function generateReport() {
        const reportType = document.getElementById('reportType').value;
        let startDate = null;
        let endDate = null;

        if (reportType === 'custom') {
            startDate = document.getElementById('startDate').value;
            endDate = document.getElementById('endDate').value;
        }

        // Fetch dashboard data from backend
        fetch('/dashboard-data', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ reportType, startDate, endDate }),
        })
        .then(response => response.json())
        .then(data => {
            // Update the dashboard metrics
            updateDashboardData(
                `₹${data.totalGrandTotal.toLocaleString()}`, 
                data.totalOrders.toString(), 
                `₹${data.totalDiscount.toLocaleString()}`, 
                data.activeUsers.toString()
            );

            // Prepare the data for the chart
            const labels = data.salesData.map(item => item.label); // Labels (e.g., dates)
            const chartData = data.salesData.map(item => item.totalSales); // Sales totals

            // Update chart with the new data
            updateChart(labels, chartData);
        })
        .catch(error => console.error('Error fetching dashboard data:', error));
    }

    // Function to update dashboard totals
    function updateDashboardData(totalSales, totalOrders, totalDiscount, activeUsers) {
        document.getElementById('totalSales').innerText = totalSales;
        document.getElementById('totalOrders').innerText = totalOrders;
        document.getElementById('totalDiscount').innerText = totalDiscount;
        document.getElementById('newUsers').innerText = activeUsers;
    }

    // Function to update or create the sales chart
    function updateChart(labels, data) {
        if (salesChart) {
            // If the chart already exists, just update it
            salesChart.data.labels = labels;
            salesChart.data.datasets[0].data = data;
            salesChart.update();
        } else {
            // Create a new chart if one doesn't exist
            salesChart = new Chart(ctx, {
                type: 'line', // You can also use 'bar', 'pie', etc.
                data: {
                    labels: labels, // X-axis labels
                    datasets: [{
                        label: 'Total Sales',
                        data: data, // Y-axis data
                        borderColor: 'rgba(75, 192, 192, 1)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            beginAtZero: true
                        },
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
    }

    // Show/Hide custom date range fields
    document.getElementById('reportType').addEventListener('change', function() {
        const customRangeDiv = document.getElementById('customRange');
        customRangeDiv.style.display = this.value === 'custom' ? 'block' : 'none';
    });
</script>




</body>
</html>
dashbord